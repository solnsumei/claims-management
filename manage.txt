from tortoise import Tortoise, run_async
from config import Config
from src.models.models import User


async def init_db(_config):
    await Tortoise.init(
        db_url=_config.DATABASE_URI,
        modules={'models': ['src.models.models']}
    )
    # Generate the schema
    await Tortoise.generate_schemas()

app_config = Config.load_config()

async def migrate_seed(_config):
    await init_db(_config)
    # Add migration script here


if __name__ == "__main__":
    run_async(migrate_admin_user(app_config))
